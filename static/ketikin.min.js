const ketikin=(e,t)=>{const r=1e3;if(fenceSpeed=e=>e=100-(e=(e=e>100?100:e)<0?0:e),getSeq=e=>e.getAttribute("ketikin-seq"),getCursor=e=>e.querySelector("#"+getSeq(e))||document.createElement("cursor"),animateCursor=e=>{getCursor(e).style.userSelect="none",getCursor(e).animate([{opacity:.5}],{duration:r,iterations:3}).onfinish=function(){getCursor(e).style.opacity="0"}},removeCursor=e=>{getCursor(e).remove()},addCursor=e=>{e.innerHTML=e.innerHTML+'<span id="{id}">|</span>'.replace("{id}",getSeq(e))},addTypingChar=(e,t)=>{e.innerHTML=e.innerHTML+t},swapTypingText=(e,t)=>{e.innerHTML=t},type=(e,t,r)=>{setTimeout((()=>removeCursor(e)|addTypingChar(e,t)|addCursor(e)),r)},backSpace=(e,t,r)=>(setTimeout((()=>removeCursor(e)|swapTypingText(e,t)|addCursor(e)),r),t.substring(0,t.length-1)),arrangeExecutionTime=(e,r)=>e+Math.floor(Math.random()*fenceSpeed(t.speed))+r,orchestrate=(e,t,n,o)=>{for(const r of t)type(e,r,o),o=arrangeExecutionTime(o,5);if(n){let n=5;for(o+=r;t;)t=backSpace(e,t,o),o=arrangeExecutionTime(o,n),n=Math.floor(.7*n);setTimeout((()=>swapTypingText(e,t)|addCursor(e)),o)}return o},playOrchestration=(e,t,n)=>{let o=0,s=!1;t.forEach(((i,a)=>{s=a<t.length-1&&!n.loop||n.loop,o=orchestrate(e,i,s,o)+r})),n.loop?setTimeout((()=>playOrchestration(e,t,n)),o):setTimeout((()=>animateCursor(e)),o)},setupOptions=e=>Object.assign({texts:null,speed:0,loop:!1},e),setupTexts=(e,t)=>(t.texts||[e.innerText]).filter((e=>e)),setupElement=e=>(e.setAttribute("ketikin-seq","seq-"+Math.random().toString(36).substr(2)),e.innerHTML="",e),"string"==typeof e)document.querySelectorAll(e).forEach((e=>{const r=setupOptions(t),n=setupTexts(e,r);n.length>0&&playOrchestration(setupElement(e),n,r)}));else{const r=setupOptions(t),n=setupTexts(e,r);n.length>0&&playOrchestration(setupElement(e),n,r)}};